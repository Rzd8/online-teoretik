(()=>{"use strict";function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var t=function(){function t(e,r){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._inactiveButtonClass=r.inactiveButtonClass,this._inputErrorClass=r.inputErrorClass,this._errorClass=r.errorClass,this._freezePlaceholderClass=r.freezePlaceholderClass,this._form=e;var o=Array.from(this._form.querySelectorAll(r.fieldSelector));this._fieldList=[],o.forEach((function(e){n._fieldList.push({input:e.querySelector(r.inputSelector),error:e.querySelector(r.inputErrorSelector),placeholder:e.querySelector(r.placeholderSelector)})})),this._submitButton=this._form.querySelector(r.submitButtonSelector)}var r,n;return r=t,(n=[{key:"_showError",value:function(e){e.input.classList.add(this._inputErrorClass),e.error.textContent=e.input.validationMessage,e.error.classList.add(this._errorClass)}},{key:"_hideError",value:function(e){e.input.classList.remove(this._inputErrorClass),e.error.classList.remove(this._errorClass),e.error.textContent=""}},{key:"_checkInputValidity",value:function(e){e.input.validity.valid?this._hideError(e):this._showError(e)}},{key:"_hasInvalidInput",value:function(){return this._fieldList.some((function(e){return!e.input.validity.valid}))}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput(this._fieldList)?(this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0):(this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1)}},{key:"_freezePlaceholder",value:function(e){e.classList.add(this._freezePlaceholderClass)}},{key:"_unfreezePlaceholder",value:function(e){e.classList.remove(this._freezePlaceholderClass)}},{key:"_isEmpty",value:function(e){!e.input.value.trim().length>=1?this._unfreezePlaceholder(e.placeholder):this._freezePlaceholder(e.placeholder)}},{key:"_togglePlaceholderState",value:function(){var e=this;this._fieldList.forEach((function(t){e._isEmpty(t)}))}},{key:"enableValidation",value:function(){var e=this;this._fieldList.forEach((function(t){t.input.addEventListener("input",(function(){e._checkInputValidity(t),e._isEmpty(t),e._toggleButtonState()}))}))}},{key:"resetValidation",value:function(){var e=this;this._togglePlaceholderState(),this._toggleButtonState(),this._fieldList.forEach((function(t){e._hideError(t)}))}}])&&e(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),t}();function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(){return i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=l(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},i.apply(this,arguments)}function l(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=u(e)););return e}function s(e,t){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},s(e,t)}function a(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}const c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(f,e);var t,r,n,l,c=(n=f,l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=u(n);if(l){var r=u(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return a(this,e)});function f(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),(r=c.call(this,e))._form=r._element.querySelector(".form"),r._callbackSubmitForm=t,r}return t=f,(r=[{key:"close",value:function(){i(u(f.prototype),"close",this).call(this)}},{key:"_getInputValues",value:function(){var e=[];return Array.from(this._form.elements).filter((function(e){return e.name})).forEach((function(t){var r=t.name,n=t.value;e[r]=n})),e}},{key:"setEventListeners",value:function(){var e=this;i(u(f.prototype),"setEventListeners",this).call(this),this._element.addEventListener("submit",(function(t){t.preventDefault(),e._callbackSubmitForm(e._getInputValues()),e.close(),e._form.reset()}))}}])&&o(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),f}(function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._element=document.querySelector(t),this._handleEscClose=this._handleEscClose.bind(this)}var t,n;return t=e,(n=[{key:"open",value:function(){this._element.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._element.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"setEventListeners",value:function(){var e=this;this._element.addEventListener("mousedown",(function(t){(t.target.classList.contains("popup_opened")||t.target.classList.contains("popup__close"))&&e.close()}))}}])&&r(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}());document.querySelector("input[name=name]"),document.querySelector("input[name=profile_job]");var f,p,h,d=document.querySelector(".add-button");p={},(h=new c("#popup__add",(function(e){var t=e.place_name,r=e.place_link;return createCard({title:t,link:r})}))).setEventListeners(),d.addEventListener("click",(function(){p.add.resetValidation(),h.open()})),f={fieldSelector:".form__field",inputSelector:".form__input",placeholderSelector:".form__placeholder",inputErrorSelector:".form__input-error",submitButtonSelector:".form__submit",inactiveButtonClass:"form__submit_disabled",inputErrorClass:"form__input_type_error",errorClass:"form__input-error_active",freezePlaceholderClass:"form__placeholder_is-fixed"},Array.from(document.forms).forEach((function(e){var r=new t(e,f),n=e.getAttribute("name");p[n]=r,r.enableValidation()}))})();